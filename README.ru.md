# Xitter

Сервис Xitter - предоставляет схожие по функционалу возможности с соц.
сетью [X](https://x.com/) (в прошлом [Twitter](https://twitter.com/)). Подобный
сервис предоставляет достаточно серьезные испытания при реализации, из за
архитектурных ограничений и ключевых требований соц. сетей.

## Функциональные требования

Архитектура X (ранее Twitter) должна обеспечивать поддержку различных
функциональных требований, чтобы обеспечить работу
масштабируемой и высокопроизводительной социальной сети. Вот основные
функциональные требования, которые должны быть
учтены при проектировании такой системы:

### Функциональные требования:

1. **Регистрация и аутентификация пользователей:**
    - Регистрация новых пользователей.
    - Подтверждение электронной почты или номера телефона.
    - Вход в систему с использованием аутентификационных данных.

2. **Профили пользователей:**
    - Просмотр и редактирование профиля пользователя.
    - Установка и изменение аватара.
    - Настройки конфиденциальности и уведомлений.

3. **Создание и управление контентом:**
    - Создание, редактирование и удаление твитов.
    - Вложение изображений, видео и других медиафайлов к твитам.
    - Использование хештегов и упоминаний (@username).

4. **Лента новостей (timeline):**
    - Отображение твитов от пользователей, на которых подписан пользователь.
    - Отображение рекламных твитов.
    - Отображение трендов и популярных хештегов.

5. **Взаимодействие с контентом:**
    - Лайки (пометки «нравится») твитов.
    - Ретвиты (перепосты) и цитирование твитов.
    - Комментирование и ответ на твиты.

6. **Подписки и подписчики:**
    - Подписка на других пользователей.
    - Управление списком подписчиков и подписок.
    - Предложения подписок на основе интересов.

7. **Уведомления:**
    - Уведомления о лайках, ретвитах, комментариях и упоминаниях.
    - Уведомления о новых подписчиках.
    - Настройка и управление уведомлениями.

8. **Поиск и тренды:**
    - Поиск твитов, пользователей и хештегов.
    - Отображение текущих трендов и популярных тем.
    - Фильтрация и сортировка результатов поиска.

9. **Сообщения (Direct Messages):**
    - Отправка и получение личных сообщений.
    - Групповые чаты.
    - Вложение медиафайлов в сообщения.

10. **Безопасность и модерация контента:**
    - Сообщение о неподобающем контенте.
    - Блокировка и жалобы на пользователей.
    - Модерация и удаление нарушающего контента.

11. **Интеграция с другими платформами:**
    - Возможность делиться твитами в других социальных сетях.
    - Интеграция с приложениями и сервисами третьих сторон.

### Дополнительные функциональные требования:

1. **Аналитика и статистика:**
    - Предоставление статистики по активности аккаунта (количество лайков,
      ретвитов, просмотров и т.д.).
    - Инструменты для анализа трендов и поведения пользователей.

2. **Реклама и монетизация:**
    - Управление рекламными кампаниями.
    - Таргетирование рекламы на основе интересов и поведения пользователей.
    - Отчеты и аналитика по эффективности рекламных кампаний.

3. **Мультиязычность и локализация:**
    - Поддержка нескольких языков интерфейса.
    - Локализация контента и трендов в зависимости от региона.

## Нефункциональные требования

#### Performance

1. **Latency:**
    - Среднее время отклика для отображения ленты новостей не должно превышать
      200 мс.
    - Время отклика для отправки твита не должно превышать 100 мс.

2. **Throughput:**
    - Система должна обрабатывать до 500 000 твитов в минуту.
    - Поддержка до 100 000 запросов к API в секунду.

#### Scalability

1. **Horizontal Scaling:**
    - Возможность горизонтального масштабирования компонентов для обработки
      увеличивающейся нагрузки без деградации производительности.

2. **Elasticity:**
    - Автоматическая адаптация инфраструктуры в зависимости от текущей
      нагрузки (авто-масштабирование).

#### Availability

1. **Uptime:**
    - Система должна обеспечивать доступность 99.99% времени.

2. **Fault Tolerance:**
    - Возможность продолжать функционировать при выходе из строя отдельных
      компонентов благодаря использованию избыточности и механизмов
      восстановления.

#### Reliability

1. **Data Integrity:**
    - Обеспечение целостности данных при выполнении транзакций и репликации.

2. **Consistency:**
    - Гарантия согласованности данных между различными компонентами системы (
      например, база данных, кэш).

#### Security

1. **Authentication and Authorization:**
    - Обеспечение безопасной аутентификации пользователей (OAuth, двухфакторная
      аутентификация).
    - Гранулированный контроль доступа к ресурсам системы.

2. **Data Protection:**
    - Шифрование данных на уровне транспортного и хранения (TLS, AES-256).
    - Регулярные аудиты безопасности и тестирование на уязвимости.

#### Maintainability

1. **Codebase:**
    - Использование модульной архитектуры для упрощения разработки и
      тестирования.

2. **Monitoring and Logging:**
    - Интеграция инструментов мониторинга (Prometheus, Grafana) и логирования (
      ELK Stack) для отслеживания состояния системы и быстрого обнаружения
      проблем.

#### Usability

1. **User Experience:**
    - Интуитивно понятный интерфейс для взаимодействия пользователей с
      платформой.

2. **Accessibility:**
    - Поддержка стандартов доступности для пользователей с ограниченными
      возможностями (WCAG).

#### Compliance

1. **Regulatory Compliance:**
    - Соответствие требованиям GDPR, CCPA и других регуляторных норм в области
      защиты данных.

#### Disaster Recovery

1. **Backup and Restore:**
    - Регулярное резервное копирование данных и планы восстановления в случае
      катастрофы.

2. **Disaster Recovery Plan:**
    - Наличие плана действий на случай отказа системы с минимальными потерями
      данных и времени простоя.

### Пример использования нефункциональных требований в контексте архитектуры

#### Scenario: High Traffic Event

**Context:**
Во время крупного события (например, глобальный спортивный чемпионат), ожидается
резкое увеличение нагрузки на систему.

**Challenges:**

- Система должна обрабатывать миллионы твитов и запросов к API в короткий
  промежуток времени.
- Необходимо поддерживать низкое время отклика и высокую доступность.

**Solutions:**

- **Scalability:** Автоматическое масштабирование ресурсов (например, серверов
  приложений, баз данных) для обработки увеличивающейся нагрузки.
- **Performance:** Использование CDN для быстрой доставки контента и кэширования
  часто запрашиваемых данных.
- **Availability:** Развертывание системы в нескольких географически
  распределенных дата-центрах для обеспечения отказоустойчивости.
- **Monitoring:** Интенсивный мониторинг производительности системы и настройка
  алертов для быстрого реагирования на возникающие проблемы.